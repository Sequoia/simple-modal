<link rel="import" href="../polymer/polymer.html"> <link rel="import" href="../simple-button/simple-button.html"> <link rel="import" href="../iron-icons/iron-icons.html"> <dom-module id="simple-modal"> <template> <style>*,::after,::before,:host{box-sizing:border-box;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}:host{position:fixed;display:none;top:0;right:0;left:0;bottom:0;overflow:scroll;padding:1rem;z-index:9999999}:host([visible]){display:-webkit-box;display:-ms-flexbox;display:flex}.overlay{position:absolute;top:0;right:0;bottom:0;left:0;background:var(--simple-modal-overlay,rgba(0,0,0,.4))}.modal{display:inline-block;position:relative;background:#fff;margin:auto;overflow:hidden;box-shadow:0 1px 1px rgba(0,0,0,.2);z-index:1;@apply(--simple-modal)}.modal__title{text-align:center;line-height:1;@apply(--simple-modal-title)}.modal__content{padding:var(--simple-modal-padding,40px);overflow:auto}.modal__close{--simple-button-icon-size:var(--simple-modal-close-size, 14px);position:absolute;top:10px;right:13px;color:var(--simple-modal-close-color,rgba(0,0,0,.6));opacity:.7;@apply(--simple-modal-close)}.modal__close:hover{opacity:1}</style> <div class="overlay" id="overlay" on-tap="close"></div> <div class="modal" id="modal"> <button is="simple-button" hidden$="[[noExit]]" class="modal__close" id="close" on-tap="close" icon="icons:close"> </button> <h1 class="modal__title" hidden$="[[!title]]">[[title]]</h1> <div class="modal__content"> <content></content> </div> </div> </template> <script>!function(){"use strict";var e={standard:"cubic-bezier(0.4, 0.0, 0.2, 1)",accelerate:"cubic-bezier(0.4, 0.0, 1, 1)",decelerate:"cubic-bezier(0.0, 0.0, 0.2, 1)"},t={modal:{frames:[{transform:"scale(0.75, 0.95)",opacity:0},{transform:"scale(1, 1)",opacity:1}],opts:{open:{easing:e.standard,fill:"both",duration:140},close:{easing:e.decelerate,fill:"both",offset:20,duration:90}}},overlay:{frames:[{opacity:0},{opacity:1}],opts:{open:{easing:"ease",fill:"both",duration:270},close:{easing:"ease",fill:"both",offset:20,duration:120}}}},i={properties:{visible:{type:Boolean,reflectToAttribute:!0}},animateModalOpen:function(){var e=t.overlay,i=t.modal;this.visible=!0,this.$.overlay.animate(e.frames,e.opts.open),this.$.modal.animate(i.frames,i.opts.open)},animateModalClosed:function(){var e=this,i=void 0,a=void 0,o=t.overlay,n=t.modal;a=this.$.overlay.animate(o.frames.slice().reverse(),o.opts.close),i=this.$.modal.animate(n.frames.slice().reverse(),n.opts.close),Promise.all([i.finished,a.finished]).then(function(){return e.visible=!1})}},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),n=function(){function e(){a(this,e)}return o(e,[{key:"beforeRegister",value:function(){this.is="simple-modal",this.properties={title:{type:String,value:""},noExit:Boolean,active:{type:Boolean,notify:!0,observer:"_activeChanged",value:!1}}}},{key:"_activeChanged",value:function(e,t){e?(this.animateModalOpen(),this.fire("simple-modal-opened")):t&&(this.animateModalClosed(),this.fire("simple-modal-closed"))}},{key:"open",value:function(){this.active=!0}},{key:"close",value:function(){this.noExit||(this.active=!1)}},{key:"getModal",value:function(){return this.$.modal}},{key:"_closeOnEscape",value:function(){var e=this;document.addEventListener("keyup",function(t){27===t.keyCode&&e.close()})}},{key:"attached",value:function(){this._closeOnEscape()}},{key:"behaviors",get:function(){return[i]}}]),e}();Polymer(n)}()</script> </dom-module>