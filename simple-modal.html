<link rel="import" href="../polymer/polymer.html"> <link rel="import" href="../simple-button/simple-button.html"> <link rel="import" href="../iron-icons/iron-icons.html"> <dom-module id="simple-modal"> <template> <style>*,::after,::before,:host{box-sizing:border-box;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}:host{position:fixed;display:none;top:0;right:0;left:0;bottom:0;overflow:scroll;padding:1rem;z-index:9999999}:host([visible]){display:-webkit-box;display:-ms-flexbox;display:flex}.overlay{position:absolute;top:0;right:0;bottom:0;left:0;background:var(--simple-modal-overlay,rgba(0,0,0,.4))}.modal{display:inline-block;position:relative;background:#fff;width:100%;height:var(--simple-modal-height,auto);min-height:100px;max-width:var(--simple-modal-width,auto);margin:auto;overflow:hidden;box-shadow:0 1px 1px rgba(0,0,0,.2);z-index:1;@apply(--simple-modal)}.modal__title{text-align:center;line-height:1;@apply(--simple-modal-title)}.modal__content{padding:var(--simple-modal-padding,30px);overflow:auto}.modal__close{--simple-button-icon-size:var(--simple-modal-close-size, 14px);position:absolute;top:10px;right:13px;color:var(--simple-modal-close-color,rgba(0,0,0,.6));opacity:.7;@apply(--simple-modal-close)}.modal__close:hover{opacity:1}</style> <div class="overlay" id="overlay" on-tap="close"></div> <div class="modal" id="modal"> <button is="simple-button" hidden$="[[noExit]]" class="modal__close" id="close" on-tap="close" icon="icons:close"> </button> <h1 class="modal__title" hidden$="[[!title]]">[[title]]</h1> <div class="modal__content"> <content></content> </div> </div> </template> <script>!function(){"use strict";var e={properties:{visible:{type:Boolean,reflectToAttribute:!0}},observers:["_toggleModal(active)"],_toggleModal:function(e,t){e?this._openModal():t&&this._closeModal()},_openModal:function(){this.visible=!0,this.$.overlay.animate(OVERLAY.frames,OVERLAY.opts.open),this.$.modal.animate(MODAL.frames,MODAL.opts.open)},_closeModal:function(){var e=this,t=void 0,i=void 0,o=OVERLAY.frames.slice().reverse(),n=MODAL.frames.slice().reverse();t=this.$.overlay.animate(o,OVERLAY.opts.close),i=this.$.modal.animate(n,MODAL.opts.close),Promise.all([t.finished,i.finished]).then(function(){return e.visible=!1})}},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),o=function(){function o(){t(this,o)}return i(o,[{key:"beforeRegister",value:function(){this.is="simple-modal",this.properties={title:{type:String,value:""},noExit:Boolean,active:{type:Boolean,notify:!0,observer:"_activeChanged",value:!1}}}},{key:"_activeChanged",value:function(e,t){e?this.fire("simple-modal-opened"):t&&this.fire("simple-modal-closed")}},{key:"open",value:function(){this.active=!0}},{key:"close",value:function(){this.noExit||(this.active=!1)}},{key:"getModal",value:function(){return this.$.modal}},{key:"_closeOnEscape",value:function(){var e=this;document.addEventListener("keyup",function(t){27===t.keyCode&&e.close()})}},{key:"attached",value:function(){this._closeOnEscape()}},{key:"behaviors",get:function(){return[e]}}]),o}();Polymer(o)}()</script> </dom-module>